@addTagHelper *, BlazorStrap
@page "/Randomize"
@using FF1Lib

<div>
	<div><input type="text" class="form-control" value="@Flags.EncodeFlagsText(MyFlags.Flags)"/></div>
	<br/>
	<BlazorNav IsTabs>
		<BlazorNavLink onclick="@ActivateShuffle" IsActive="@(activeTab == "Shuffle")">Shuffle</BlazorNavLink>
		<BlazorNavLink onclick="@ActivateTreasures" IsActive="@(activeTab == "Treasures")">Treasures</BlazorNavLink>
	</BlazorNav>
	<TabContent>
		<TabPane IsOpen="@(activeTab == "Shuffle")">
			<div class="container">
				<div class="row">
					<div class="col-4">
						<CheckBox Id="shopsCheckBox" bind-Value="@MyFlags.Shops">Shops</CheckBox>
						<CheckBox Indent IsEnabled="@MyFlags.Shops" Id="randomWaresCheckBox" bind-Value="@MyFlags.RandomWares">Random Weapons and Armor</CheckBox>
						<CheckBox Id="magicShopsCheckBox" bind-Value="@MyFlags.MagicShops">Magic Shops</CheckBox>
						<CheckBox Id="magicLevelsCheckBox" bind-Value="@MyFlags.MagicLevels">Magic Levels</CheckBox>
						<CheckBox Indent IsEnabled="@MyFlags.MagicLevels" Id="magicPermissionsCheckBox" bind-Value="@MyFlags.MagicPermissions">Keep Permissions</CheckBox>
						<CheckBox Id="itemMagicCheckBox" bind-Value="@MyFlags.ItemMagic">Item Magic</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="rngCheckBox" bind-Value="@MyFlags.Rng">RNG Table</CheckBox>
					</div>
					<div class="col-4">
						<CheckBox Id="enemyScriptsCheckBox" bind-Value="@MyFlags.EnemyScripts">Enemy Scripts</CheckBox>
						<CheckBox Indent IsEnabled="@MyFlags.EnemyScripts" Id="allowUnsafePiratesCheckBox" bind-Value="@MyFlags.AllowUnsafePirates">Allow Unsafe Pirates</CheckBox>
						<CheckBox Id="enemySkillsSpellsCheckBox" bind-Value="@MyFlags.EnemySkillsSpells">Enemy Skills/Spells</CheckBox>
						<CheckBox Id="enemyStatusAttacksCheckBox" bind-Value="@MyFlags.EnemyStatusAttacks">Enemy Status Attacks</CheckBox>
						<CheckBox Id="enemyFormationsUnrunnableCheckBox" bind-Value="@MyFlags.EnemyFormationsUnrunnable">Enemy Unrunnable Formations</CheckBox>
						<CheckBox Id="enemyFormationsSurpriseCheckBox" bind-Value="@MyFlags.EnemyFormationsSurprise">Enemy Surprise Bonus</CheckBox>
						<div class="checkbox-cell">Formation Shuffle Mode</div>
						<CheckBox Id="enemyTrapTilesCheckBox" bind-Value="@MyFlags.EnemyTrapTiles">Enemy Forced Encounter Tiles</CheckBox>
						<CheckBox Id="randomTrapFormationsCheckBox" bind-Value="@MyFlags.RandomTrapFormations">Use Random Formations</CheckBox>
					</div>
				</div>
			</div>
		</TabPane>
		<TabPane IsOpen="@(activeTab == "Treasures")">
			<div class="container">
				<div class="row">
					<div class="col-4">
						<h4>Items Shuffle</h4>
						<CheckBox Id="treasuresCheckBox" bind-Value="@MyFlags.Treasures">Treasures</CheckBox>
						<CheckBox Id="npcItemsCheckBox" bind-Value="@MyFlags.NPCItems">Main NPC Items</CheckBox>
						<CheckBox Id="npcFetchItemsCheckBox" bind-Value="@MyFlags.NPCFetchItems">Fetch Quest Rewards</CheckBox>
					</div>
					<div class="col-4">
						<h4>Incentivized Locations</h4>
						<CheckBox Id="incentivizeFreeNPCsCheckBox" bind-Value="@MyFlags.IncentivizeFreeNPCs">Main NPCs</CheckBox>
						<CheckBox Id="incentivizeFreeNPCsCheckBox" bind-Value="@MyFlags.IncentivizeFetchNPCs">Fetch Quest NPCs</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="incentivizeIceCaveCheckBox" bind-Value="@MyFlags.IncentivizeIceCave">Ice Cave</CheckBox>
						<CheckBox Id="incentivizeOrdealsCheckBox" bind-Value="@MyFlags.IncentivizeOrdeals">Ordeals</CheckBox>
						<CheckBox Id="incentivizeMarshCheckBox" bind-Value="@MyFlags.IncentivizeMarsh">Marsh Cave</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="incentivizeEarthCheckBox" bind-Value="@MyFlags.IncentivizeEarth">Earth Cave</CheckBox>
						<CheckBox Id="incentivizeVolcanoCheckBox" bind-Value="@MyFlags.IncentivizeVolcano">Volcano</CheckBox>
						<CheckBox Id="incentivizeSeaShrineCheckBox" bind-Value="@MyFlags.IncentivizeSeaShrine">Sea Shrine</CheckBox>
						<CheckBox Id="incentivizeSkyPalaceCheckBox" bind-Value="@MyFlags.IncentivizeSkyPalace">Sky Palace</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="incentivizeConeriaCheckBox" bind-Value="@MyFlags.IncentivizeConeria">Coneria (locked)</CheckBox>
						<CheckBox Id="incentivizeMarshKeyLockedCheckBox" bind-Value="@MyFlags.IncentivizeMarshKeyLocked">Marsh (locked)</CheckBox>
					</div>
					<div class="col-4">
						<h4>Incentivized Items</h4>
						<p>Any Required Item being Shuffled will be included in the incentive pool by default. Add additional items below:</p>
						<CheckBox Id="incentivizeTailCheckBox" bind-Value="@MyFlags.IncentivizeTail">Tail</CheckBox>
						<CheckBox Id="incentivizeFetchItemsCheckBox" bind-Value="@MyFlags.IncentivizeFetchItems">Other Quest Items</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="incentivizeMasamuneCheckBox" bind-Value="@MyFlags.IncentivizeMasamune">Masamune</CheckBox>
						<CheckBox Id="incentivizeRibbonCheckBox" bind-Value="@MyFlags.IncentivizeRibbon">Ribbon</CheckBox>
						<CheckBox Id="incentivizeOpalCheckBox" bind-Value="@MyFlags.IncentivizeOpal">Opal Bracelet</CheckBox>
						<div class="checkbox-cell"></div>
						<CheckBox Id="incentivizeDefCastArmorCheckBox" bind-Value="@MyFlags.IncentivizeDefCastArmor">White Shirt</CheckBox>
						<CheckBox Id="incentivizeOfffCastArmorCheckBox" bind-Value="@MyFlags.IncentivizeOffCastArmor">Power Gauntlet</CheckBox>
						<CheckBox Id="incentivizeDefCastWeaponCheckBox" bind-Value="@MyFlags.IncentivizeDefCastArmor">Defense</CheckBox>
						<CheckBox Id="incentivizeOffCastWeaponCheckBox" bind-Value="@MyFlags.IncentivizeOffCastWeapon">Thor Hammer</CheckBox>
					</div>
				</div>
			</div>
		</TabPane>
	</TabContent>
</div>

@functions
{
	private ViewModelFlags MyFlags { get; set; } = new ViewModelFlags();

	private string activeTab = "Shuffle";

	void ActivateShuffle(UIMouseEventArgs e)
	{
		activeTab = "Shuffle";
		StateHasChanged();
	}

	void ActivateTreasures(UIMouseEventArgs e)
	{
		activeTab = "Treasures";
		StateHasChanged();
	}

	protected override void OnInit()
	{
		MyFlags.PropertyChanged += (sender, args) => StateHasChanged();
	}

}
